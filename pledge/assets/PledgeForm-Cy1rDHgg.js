import{e as v,s as b,E as P,d as g,o as i,c as n,f as s,n as _,u as w,_ as h,t as u,g as p,F as y,r as k,b as x,a as F,w as D,v as R}from"./index-DzPHn1ky.js";const T="service_account",L="pledge-form-app",S="f3e036893aa002f1608c95300d4b0bbe76753614",q="pledge-form-app@pledge-form-app.iam.gserviceaccount.com",E="107349963010640637197",V="https://accounts.google.com/o/oauth2/auth",I="https://oauth2.googleapis.com/token",M="https://www.googleapis.com/oauth2/v1/certs",O="https://www.googleapis.com/robot/v1/metadata/x509/pledge-form-app%40pledge-form-app.iam.gserviceaccount.com",C="googleapis.com",H={type:T,project_id:L,private_key_id:S,client_email:q,client_id:E,auth_uri:V,token_uri:I,auth_provider_x509_cert_url:M,client_x509_cert_url:O,universe_domain:C},m={spreadsheetId:"1rMtJ-0urQwmmPSk2EnPrQnxkO5GWbCbua9Vod6FiGPQ",danaFormTab:"Dana",donationFormTab:"Donations"},N={title:"Kathina Donations",description:"Please submit your pledge for the Kathina donations.",items:[{title:"Temple Operational Expenses",description:"These are the projected expenses related to continuied operation of the temple over the coming year."},{title:"Electricity bill",description:"One unit is one-month sponsorship.",unitPrice:200,unitsRequired:12,unitsReceived:2,unitLabelSingular:"month",unitLabelPlural:"months"},{title:"Average heating bill",unitPrice:80,unitsRequired:12,unitsReceived:0,unitLabelSingular:"month",unitLabelPlural:"months"},{title:"100 Watt equivalent, 6-pack LED lamps",unitsRequired:3,unitsReceived:2,unitLabelSingular:"pack",unitLabelPlural:"packs"}]},se=v("pledgeSubmission",{state:()=>({danaPledgeForm:null,donationPledgeForm:null,name:"",email:"",phone:""}),actions:{async loadForm(a,t){const c=await fetch("https://script.google.com/macros/s/AKfycbwgVw-1Q1ugg6wLCbE-y0DbMWNm-P99LFrXDWVilsXf_mKOnwJBo9qLzUcxzpmEUE_Z/exec",{redirect:"follow",method:"POST",body:JSON.stringify({user:"pledge-form-app@pledge-form-app.iam.gserviceaccount.com"}),headers:{"Content-Type":"text/plain; charset=UTF-8"}});let o="";if(c.ok){o=await c.text(),o=o.replace(/\\n/gi,`
`);const d=["https://www.googleapis.com/auth/spreadsheets","https://www.googleapis.com/auth/drive.file"],e=new b.JWT({email:H.client_email,key:o,scopes:d}),l=new P(m.spreadsheetId,e);await l.loadInfo(),console.log(l.title)}return N},async loadDanaPledgeFrom(){this.danaPledgeForm=await this.loadForm(m.spreadsheetId,m.danaFormTab)},async loadDonationsPledgeFrom(){this.donationPledgeForm=await this.loadForm(m.spreadsheetId,m.danaFormTab)},setDanaPledge(a,t){this.danaPledgeForm.items.find(r=>r.title==a).unitsPledged=t},setDonationPledge(a,t){this.donationPledgeForm.items.find(r=>r.title==a).unitsPledged=t}}}),B={class:"progress"},U=["aria-valuenow","aria-valuemax"],W=["aria-valuenow","aria-valuemax"],$=g({__name:"ProgressBar",props:{max:{},current:{}},setup(a){const t=a,r=Math.round(t.current/t.max*100),c=100-r;return(o,d)=>(i(),n("div",B,[s("div",{class:"progress-bar bg-success",role:"progressbar","aria-valuenow":o.current,"aria-valuemin":0,"aria-valuemax":o.max,style:_("width:"+w(r)+"%")},null,12,U),s("div",{class:"progress-bar bg-danger",role:"progressbar","aria-valuenow":o.current,"aria-valuemin":0,"aria-valuemax":o.max,style:_("width:"+c+"%")},null,12,W)]))}}),j=h($,[["__scopeId","data-v-4b69f0d8"]]),A={key:0},J=["innerHTML"],K={key:0},Q=["innerHTML"],z={key:1,class:"row"},G={key:0,class:""},X={class:"field-row"},Y=["for"],Z=["id"],ee={key:0},te={class:""},oe=["max","id","aria-describedby","onUpdate:modelValue"],ie=g({__name:"PledgeForm",props:{formDefinition:{}},setup(a){const t=a;return(r,c)=>{var o,d;return t.formDefinition?(i(),n("div",A,[s("h1",null,u(t.formDefinition.title),1),((o=t.formDefinition.description)==null?void 0:o.length)>0?(i(),n("div",{key:0,innerHTML:t.formDefinition.description},null,8,J)):p("",!0),(i(!0),n(y,null,k((d=t.formDefinition)==null?void 0:d.items,(e,l)=>(i(),n("div",{key:l},[!e.unitsRequired||e.unitsRequired==0?(i(),n("div",K,[s("h2",null,u(e.title),1),e.description&&e.description.length>0?(i(),n("div",{key:0,innerHTML:e.description},null,8,Q)):p("",!0)])):(i(),n("div",z,[e.unitsRequired>(e.unitsReceived?e.unitsReceived:0)?(i(),n("div",G,[s("div",X,[s("label",{for:"field"+l,class:"form-label"},u(e.title),9,Y),s("div",{id:"fieldHelp"+l},[x(u(e.description)+" ",1),e.unitPrice&&e.unitPrice>0?(i(),n("span",ee,"One sponsorship = $"+u(e.unitPrice)+".",1)):p("",!0)],8,Z),s("div",te,[F(j,{current:e.unitsReceived?e.unitsReceived:0,max:e.unitsRequired},null,8,["current","max"]),c[0]||(c[0]=s("span",{class:"contribution-prompt"},"Your Contribution: ",-1)),D(s("input",{type:"number",min:"0",max:e.unitsRequired-(e.unitsReceived?e.unitsReceived:0),class:"col-1",id:"fieldHelp"+l,"aria-describedby":"fieldHelp"+l,"onUpdate:modelValue":f=>e.unitsPledged=f,value:"0"},null,8,oe),[[R,e.unitsPledged]])])])])):p("",!0)]))]))),128))])):p("",!0)}}}),ae=h(ie,[["__scopeId","data-v-f7298fb9"]]);export{ae as P,se as u};
